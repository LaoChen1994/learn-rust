# Rustå­¦ä¹ ç¬”è®°

## 0. å†™åœ¨å‰é¢

### 0.1 ç›¸å…³èµ„æ–™

1.  [Rust Programing Language](https://doc.rust-lang.org/book/title-page.html)
2.  [æºç åœ°å€](https://github.com/LaoChen1994/learn-rust)https://doc.rust-lang.org/book/title-page.html)

### 0.2 æœ¬ç« å¤§çº²

1. rustç¯å¢ƒçš„å®‰è£…
2. ç¬¬ä¸€ä¸ªhello rustç¨‹åº
3. cargoçš„ç®€å•ä½¿ç”¨ï¼ˆåŒ…çš„åˆ›å»ºï¼Œæ‰“åŒ…ï¼Œè¿è¡Œï¼Œæ£€æµ‹æ›´æ–°ï¼‰
4. tomlæ–‡ä»¶ä¸€äº›é…ç½®é¡¹çš„ä½¿ç”¨

## 1. ç¯å¢ƒå®‰è£…

### 1.1 windowså®‰è£…

+ æ­¥éª¤ï¼š 

  + C++ç¯å¢ƒå®‰è£…ï¼šæ ¹æ®æ–‡æ¡£ä¸­ï¼Œwindowså¯ä»¥å…ˆè¿›å…¥[visual-cpp-build-tools](https://visualstudio.microsoft.com/zh-hans/visual-cpp-build-tools/)ä¸‹è½½å¯¹åº”çš„å·¥å…·ï¼Œå®‰è£…å®Œæˆåï¼Œé‡å¯ç”µè„‘å³å¯
  + Rustå®‰è£…ï¼š[rustä¸‹è½½](https://forge.rust-lang.org/infra/other-installation-methods.html)é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯
  + æµ‹è¯•ï¼šä½¿ç”¨`rustc --version`èƒ½çœ‹åˆ°å¯¹åº”çš„ç‰ˆæœ¬å·å°±æ˜¯å®‰è£…æˆåŠŸå•¦

### 1.2 MacOSå®‰è£…è¿‡ç¨‹

+ æ­¥éª¤ï¼š
    + è¿è¡Œå®‰è£…å‘½ä»¤
    ```bash
        # è¿è¡Œå‘½ä»¤
        curl --proto '=https' --tlsv1.2 https://sh.rustup.rs -sSf | sh
    ```
    + æŸ¥çœ‹æç¤ºï¼ŒæˆåŠŸå®‰è£…åï¼Œå‘½ä»¤è¡Œä¼šæç¤º **Rust is installed now. Great!**


## 2. Hello Rust

### 2.1 ç¬¬ä¸€ä¸ªRustä»£ç 

```rust
fn main() {
    println!("hello Rust");
}
```

+ å…³é”®åˆ†æ
  + ç¬¬ä¸€è¡Œçš„fnç”¨äºå£°æ˜ä¸€ä¸ªå‡½æ•°
  + mainå‡½æ•°åœ¨rustå‡½æ•°ä¸­æ˜¯ä½œä¸ºç¬¬ä¸€è¡Œä»£ç æ‰§è¡Œçš„
  + printlnåé¢çš„`!`ï¼Œè¿™æ˜¯macroçš„å®ï¼Œå¦‚æœåŠ äº†`!`ä»£è¡¨ä½ è°ƒç”¨çš„æ˜¯rustçš„å®è€Œä¸æ˜¯æ™®é€šå‡½æ•°
  + `;`ä»£è¡¨è¯¥è¡Œè¯­å¥ç»“æŸ

### 2.2 ç¼–è¯‘rust

```bash
rustc ./helloRust.ts
```

**ç»“æœ**: ç¼–è¯‘ä¹‹åæˆ‘ä»¬ä¼šæ‹¿åˆ°ä¸¤ä¸ªæ–‡ä»¶`helloRust.exe`å’Œ`helloRust.pdb`

å…¶ä¸­è¿™ä¸ª`exe`æ–‡ä»¶å°±æ˜¯åœ¨windowsä¸Šç›´æ¥å¯ä»¥æ‰§è¡Œçš„æ–‡ä»¶


### 2.3 å’ŒåŠ¨æ€è¯­è¨€çš„åŒºåˆ«

åŠ¨æ€è¯­è¨€ï¼šjsï¼Œpythonï¼Œrubyç­‰éœ€è¦æˆ‘ä»¬åœ¨è¿è¡Œçš„å¹³å°å®‰è£…å¯¹åº”çš„è§£é‡Šå™¨ï¼Œé€šè¿‡è§£é‡Šå™¨å°†ä»£ç è½¬æ¢ä¸ºå­—èŠ‚ç ï¼Œé€šè¿‡å­—èŠ‚ç è§£é‡Šå™¨æ¥è¯»å–å¹¶æ‰§è¡Œå­—èŠ‚ç 

ç¼–è¯‘å‹è¯­è¨€ï¼šå°†ä»£ç ç¼–è¯‘æˆäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹³å°ä¸Šå¯ä»¥ä¸å®‰è£…ä»»ä½•è§£é‡Šå™¨


## 3. Hello Cargo

### 3.1 cargoæ˜¯ä»€ä¹ˆ

  1. cargoæ˜¯ä¸€ä¸ªæ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å·¥å…·
  2. ç”¨æ¥ç®¡ç†rustå·¥ç¨‹å’Œå¤„ç†è®¸å¤šä»»åŠ¡ï¼ˆæ„å»ºä»£ç ã€ä¸‹è½½åŒ…ï¼‰
  3. cargoåœ¨å®‰è£…rustçš„ç¯å¢ƒæ—¶ï¼Œä¼šè‡ªåŠ¨å®‰è£…ï¼Œæ‰€ä»¥è¿™é‡Œçš„è¯ï¼Œç›´æ¥è°ƒç”¨
     ```bash
      # å¯ä»¥ç›´æ¥çœ‹åˆ°å¯¹åº”çš„cargoç‰ˆæœ¬
      cargo --version
     ```
  > ç±»ä¼¼nodejsä¸­çš„npmï¼Œé€šè¿‡scripsæ¥å¸®æˆ‘ä»¬æ‰§è¡Œç›¸åº”è„šæœ¬ï¼Œé€šè¿‡installæ¥å®‰è£…åŒ…

### 3.2 cargoå·¥ç¨‹çš„åˆ›å»º

#### 3.2.1 åˆ›å»º

ä½¿ç”¨`cargo new [projectName]`æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„å·¥ç¨‹
```bash
cargo new hello_cargo
```

![](./images/02-hello-rust.png)

#### 3.2.2 ç›®å½•è§£æ

åˆ›å»ºçš„ç›®å½•åŒ…æ‹¬ï¼š

+ cargo.tomlï¼šç”¨äºå®šä¹‰åŒ…å’Œä¿¡æ¯`[package]`å’Œä¾èµ–`[dependencies]`ï¼Œå…¶ä»–è¿˜æœ‰åˆ«çš„é…ç½®å¦‚ä¸‹ï¼š

  ![](.\images\03-hello-cargo-toml.png)

+ æºæ–‡ä»¶ç›®å‰æ˜¯æ”¾åœ¨srcçš„ç›®å½•ä¸‹çš„

#### 3.2.3 tomlæ–‡ä»¶ä¸­éœ€è¦æ³¨æ„çš„ç‚¹

`[package]`ä¸‹é¢çš„ä¸€äº›é…ç½®:

+ buildï¼šç”¨äºæŒ‡å®šbuildæ¥æŒ‡å®šè¿™ä¸ªåŒ…ç”¨æºç çš„æ–¹å¼ç¼–è¯‘

  > æ¯”å¦‚åœ¨rustä¸­å¼•ç”¨äº†æ¯”å¦‚Cçš„åº“ï¼Œè¿™äº›ä¸œè¥¿ç¼–è¯‘å°±æ”¾åœ¨ä¸€ä¸ªbuild.rsä¸­ï¼Œä¼šé€šè¿‡æºç çš„æ–¹å¼è¿›è¡Œç¼–è¯‘

+ includeå’Œexcludeï¼šç”¨æ¥æŒ‡å®šé‚£äº›åŒ…éœ€è¦è¢«æ‰“åŒ…æˆ–å‘å¸ƒï¼Œå¯ä»¥é€šè¿‡`carge package --list`æ¥æŸ¥çœ‹

+ publish: ç”¨æ¥æŒ‡å®šåŒ…æ˜¯å¦å‘å¸ƒåˆ°åŒ…ä»“åº“ï¼Œ==ä¿æŠ¤åŒ…çš„ç§æœ‰æ€§==



### 3.3 ä½¿ç”¨cargoæ„å»ºå’Œè·‘rustå·¥ç¨‹

#### 3.3.1 æ„å»ºrustå·¥ç¨‹

```bash
cargo build
```

#### 3.3.2 è¿è¡Œcargoå·¥ç¨‹

æ„å»ºæˆåŠŸä¹‹åçš„æ–‡ä»¶éƒ½åœ¨==target/debug/hello_cargo==ä¸‹ï¼Œç›´æ¥è¿è¡Œç›®å½•ä¸‹çš„`exe`æ–‡ä»¶ä¹Ÿå¯ä»¥è¿è¡Œ

```bash
.\target\debug\hello_cargo.exe
```

ä¹Ÿå¯ä»¥é€šè¿‡cargoæ¥è¿è¡Œå¯¹åº”çš„exeæ‰“åŒ…æ–‡ä»¶

```bash
cargo run
```

åœ¨æ‰§è¡Œcargo runçš„æ—¶å€™æœ‰ä¸¤ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹ï¼š

1. æºæ–‡ä»¶æ²¡æœ‰å˜åŒ–ï¼Œç›´æ¥æ‰§è¡Œcargo buildå‡ºæ¥çš„æ–‡ä»¶

2. å¦‚æœæºæ–‡ä»¶äº§ç”Ÿäº†å˜åŒ–ï¼Œä¼šå…ˆç¼–è¯‘ï¼Œç„¶åå†æ‰§è¡Œ

   ![](.\images\03-cargo-build.png)

3. è¿™é‡Œå¯ä»¥é€šè¿‡`cargo check`æ¥æ£€éªŒå½“å‰ç‰ˆæœ¬çš„ç¼–è¯‘åçš„ä»£ç ï¼Œæ˜¯å¦è¿˜æœ‰æ›´æ–°ä¸ºç¼–è¯‘çš„ç‰ˆæœ¬

#### 3.3.3 æ„å»ºå‘å¸ƒç‰ˆæœ¬

é€šè¿‡`--release`æ¥æŒ‡å®šæ„å»ºçš„ç‰ˆæœ¬ä¸ºå‘å¸ƒç‰ˆæœ¬ï¼Œé€šè¿‡`release`æ¥å‘å¸ƒï¼Œä¼šåšå¾ˆå¤šä¼˜åŒ–ï¼Œä½¿rustä»£ç è¿è¡Œæ›´å¿«ï¼Œä½†ä¹Ÿä¼šè®©==æ„å»ºæ—¶é—´æ›´é•¿==ï¼Œå¦å¤–æ„å»ºå‘å¸ƒçš„æ—¶å€™ï¼Œè¿™ä¸ªåœ°æ–¹ç”Ÿæˆçš„æ–‡ä»¶æ˜¯åœ¨targetä¸‹çš„ã€‚

## 4. ä¸€ä¸ªçŸ³å¤´å‰ªåˆ€å¸ƒçš„æ¸¸æˆ

### å†™åœ¨å‰é¢

æˆ‘çœ‹åŸä¹¦é‡Œé¢æŠŠè¿™ä¸€å¼ æ”¾åœ¨å®‰è£…ä¹‹åï¼Œä½†æ˜¯æˆ‘è§‰å¾—æœ‰ç‚¹å›°éš¾äº†ï¼Œå› ä¸ºæœ¬ç« æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹åŒ…æ‹¬ï¼š

1. æ¨¡å—çš„å¼•å…¥ä¸å®‰è£…
2. æ ‡å‡†è¾“å…¥è¾“å‡ºçš„ä½¿ç”¨
3. å˜é‡å®šä¹‰
4. å˜é‡è½¬æ¢
5. æ¨¡å—ä¸­æ–¹æ³•çš„ä½¿ç”¨
6. traitã€modulesã€Structã€Functionæ¦‚å¿µ
7. å¾ªç¯çš„ä½¿ç”¨

**æˆ‘çš„æƒ³æ³•**å¯¹äºä¸€ä¸ªrustçš„å°ç™½æ¥è¯´ï¼Œå…¶å®æˆ‘å¯¹åŸºæœ¬çš„è¯­æ³•éƒ½ä¸å¤ªæ¸…æ¥šï¼Œçœ‹è¿™ä¸€ç« ç¡®å®åªèƒ½çœ‹ä¸ªçƒ­é—¹ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªå°ç™½è¿™ç« çš„ç¬”è®°è¿˜æ˜¯å…ˆæ‹¿ä¸Šæ¥ï¼Œå¾ˆå¤šéƒ½æ˜¯è‡ªå·±æ ¹æ®jsè¿ç§»è¿‡æ¥çš„ä¸€äº›ç†è§£ï¼Œå¯èƒ½å¹¶ä¸æ­£ç¡®ï¼ŒåæœŸå­¦å®Œç›¸åº”çš„çŸ¥è¯†åï¼Œåº”è¯¥ä¹Ÿä¼šåšç›¸åº”çš„è°ƒæ•´ã€‚

### 4.1 éœ€æ±‚åˆ†æ



+ è¿™é‡Œå…¶å®æƒ³åšçš„ä¸€ä»¶äº‹æ˜¯ï¼š
  + éšæœºäº§ç”Ÿä¸€ä¸ªæ•°å­—
  + è®©ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæ•°å­—
  + æ¯”å¯¹ä¸¤ä¸ªæ•°å­—çš„ç»“æœ
  + æ ¹æ®å¯¹æ¯”ç»“æœè¾“å‡ºç›¸åº”çš„å¯¹æ¯”ç»“æœï¼Œä¸€ç›´å¾ªç¯ä¸Šè¿°`æ­¥éª¤äºŒ`å’Œ`æ­¥éª¤ä¸‰`ç›´åˆ°ç”¨æˆ·è¾“å…¥å’Œéšæœºæ•°ç›¸åŒ
  + çŒœä¸­æ•°å­—ï¼Œç»“æŸå¾ªç¯

æ—¢ç„¶çœ‹èµ·æ¥å¾ˆç®€å•çš„éœ€æ±‚ï¼Œé‚£ä¹ˆå°±æ¥codingæŠŠ

### 4.2 éšæœºç”Ÿæˆä¸€ä¸ªæ•°

#### 4.2.1 æ¨¡å—çš„å®‰è£…

å¯ä»¥é€šè¿‡å¼•å…¥`rand`æ¨¡å—çš„æ–¹å¼ï¼Œæ¥å®ç°éšæœºæ•°çš„åˆ›å»ºï¼Œç”±äºè¿™é‡Œrandæ˜¯ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬å…ˆå®‰è£…ã€‚

**å®‰è£…æ­¥éª¤**ï¼š

1. åœ¨catgo.tomlçš„packagesä¾èµ–ä¸­ï¼Œå¢åŠ randæ¨¡å—ï¼Œç‰ˆæœ¬ä¸º0.8.3
2. ä½¿ç”¨cargo updateæ›´æ–°ä¸‹é•œåƒ
3. ä½¿ç”¨cargo runçš„æ—¶å€™æ¨¡å—ä¼šè¢«è‡ªåŠ¨å®‰è£…

**æ¢æºæ­¥éª¤**ï¼ˆ[å‚è€ƒæ–‡æ¡£](https://www.cnblogs.com/baby123/p/13260212.html)ï¼‰

1. åœ¨æ ¹ç›®å½•ä¸‹çš„.cargoåˆ›å»ºconfigæ–‡ä»¶
2. æ ¹æ®ä¸Šè¿°ç½‘å€ä¸­å¯¹åº”çš„å†…å®¹å¤åˆ¶è¿‡å»å°±è¡Œ
3. cargo updateä¸€ä¸‹



#### 4.2.2 ä»£ç ç¼–å†™

```rust
use rand::Rng;

fn main() {
    println!("Guess the number!");
    let secret_number_1 = rand::thread_rng().gen_range(1..10);
}
```

**FAQ**ï¼š

*Q1*: ä¸ºä»€ä¹ˆuse rand::Rngä¸å¯¼å…¥çš„æ—¶å€™ï¼Œè¿™ä¸ªgen_rangeå°±æŠ¥é”™ï¼Ÿ

*A1*: å› ä¸º`Rng`è¿™ä¸ª==trait==å®šä¹‰äº†éšæœºæ•°æ–¹æ³•çš„å®ç°ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªåœ°æ–¹ç°æœ‰äº†å®ç°çš„å¼•ç”¨ï¼Œç„¶åè¿™è¾¹è°ƒç”¨gen_rangeæ‰èƒ½è°ƒç”¨



*Q2*: `1..10`å†™æ³•çš„æ„æ€ï¼Ÿ

*A2*:è¿™é‡Œæœ‰ä¸¤ç§å†™æ³•`1..10`å’Œ`1..=10`ï¼Œå‰è€…æ˜¯`[1, 10)`è¿™ä¸ªåŒºé—´ï¼Œåè€…æ˜¯`[1, 10]`è¿™ä¸ªåŒºé—´



*Q3*:å¦‚ä½•å»çœ‹è¿™äº›å‡½æ•°æ€ä¹ˆè°ƒç”¨ï¼Ÿ

*A3*: å¯ä»¥é€šè¿‡`cargo doc --open`æ–¹æ³•æ¥æ‰“å¼€å¸®åŠ©æ–‡æ¡£æ ¹æ®æ–‡æ¡£ä½¿ç”¨å¯¹åº”çš„åŒ…



*Q4*ï¼šå¦‚ä½•è°ƒç”¨è¯¥å‡½æ•°æ–¹æ³•ï¼Ÿ

*A4*: ä½¿ç”¨`::`çš„è¯­æ³•



> è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨rand::tread_rng()ç”Ÿæˆäº†ä¸€ä¸ªåŒºé—´1~10é—´çš„æ•°å­—

### 4.3 è·å–ç”¨æˆ·è¾“å…¥

#### 4.3.1 ä»£ç ç¼–å†™



```rust
use rand::Rng;
// ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“stdä¸­çš„ioæ¨¡å—
// åœ¨jsé‡Œé¢ç›¸å½“äº import { io } from 'std' è¿™ä¸ªç±»æ¯”æ˜¯æˆ‘è‡ªå·±ç†è§£çš„ä¸ä¸€å®šæ­£ç¡®
use std::io;

fn main() {
    // çœç•¥
    println!("Please input your guess");

    let mut guess = String::new();
    io::stdin().read_line(&mut guess).expect("Fail to read line");
}
```

**FAQ**ï¼š

*Q1*: `mut`æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæœ‰mutå’Œæ²¡æœ‰æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

*A1*: åœ¨rustä¸­æ‰€æœ‰å˜é‡é»˜è®¤æ˜¯immutableçš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥æ‡‚äº†

â€‹		æœ‰mutå®šä¹‰ï¼šä»£è¡¨å‚æ•°æ˜¯mutableçš„

â€‹		æ— mutå®šä¹‰ï¼šä»£è¡¨å‚æ•°æ˜¯immutableçš„



*Q2*: å®ä¾‹å¦‚ä½•åˆ›å»ºï¼Ÿ

*A2*:  é€šè¿‡ç±»`::`æ–¹æ³•çš„æ–¹å¼ï¼Œè¡¨ç¤ºè°ƒç”¨äº†ç±»çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯ä¸€newçš„ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œnewæˆ‘ç†è§£æ˜¯rustä¸­ä¸€ä¸ªé€šç”¨çš„åç§°ï¼Œç”¨æ¥åˆ›å»ºæŸä¸ªç±»æ–°çš„å€¼



*Q3*ï¼šè¿™é‡Œçš„`&mut guess`æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ

*A4*: åœ¨rustä¸­ï¼Œè¿™é‡Œé€šè¿‡`&`æ¥è¡¨æ˜æ‹¿çš„æ•°ï¼Œæ˜¯å¯¹åº”æ•°åœ¨å†…å­˜ä¸­çš„**å¼•ç”¨**ï¼Œ`å¯ä»¥ä¿è¯åœ¨ä»£ç ä¸­å¤šä¸ªåœ°æ–¹æ‹¿åŒä¸€ä¸ªå€¼ï¼Œä¸éœ€è¦æ‹·è´å¤šä»½`ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸å¤æ‚çš„ç‰¹æ€§ã€‚



*Q4*: `expect`æ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„

*A3*: åœ¨rustä¸­ï¼Œå¾ˆå¤šæ–¹æ³•è¿”å›çš„ç±»å‹æ˜¯Resultï¼Œè¿™ä¸ªç±»å‹çš„æ„æ€æ˜¯ï¼Œå¦‚æœæˆåŠŸå°±è¿”å›ä¸€ä¸ªOkçš„æšä¸¾å€¼ï¼Œå¦‚æœå¤±è´¥å°±è¿”å›ä¸€ä¸ªErrorçš„æšä¸¾å€¼ï¼Œé‚£ä¹ˆè¿™é‡Œå¤±è´¥çš„æ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬expectä¼ å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¤±è´¥çš„msgå°±ä¼šæ˜¯æˆ‘ä»¬ä¼ å…¥çš„å­—ç¬¦ä¸²ï¼Œå¯ç”¨æ¥å®šä½é”™è¯¯ä¿¡æ¯



*Q5*ï¼šResultä¸­çš„å‡ ç§å½¢å¼

*A5*ï¼š

ç±»å‹ä¸€ï¼šæ”¯æŒé€šè¿‡exceptæ–¹æ³•ï¼Œå½“æ‰§è¡Œç»“æœä¸ºæˆåŠŸçš„æ—¶å€™ï¼Œç›´æ¥è·³è¿‡ï¼Œé”™è¯¯çš„æ—¶å€™æŠ›å‡ºexpectä¸­ç»™å‡ºçš„é”™è¯¯ä¿¡æ¯

ç±»å‹äºŒï¼šé€šè¿‡Okå’ŒErrä¸¤ä¸ªå˜é‡ï¼Œæ¥å¯¹æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«åšæ“ä½œï¼Œ**ä½†æ˜¯ç›®å‰å®æµ‹è¿™ç§ç”¨æ³•ï¼Œå°±æ˜¯Errå’ŒOkçš„å†™æ³•è¦é…åˆmatchå…³é”®è¯æ‰èƒ½ç”Ÿæ•ˆ**å…·ä½“ä¾‹å­å¦‚ä¸‹:

```rust
fn main {
    let mut guess = String::new();
    match io::stdin().read_line(&mut guess) {
        Ok(n) => {
            println!("{} bytes read", n);
            println!("{}", guess);
        }
        Err(error) => println!("error: {}", error),
    };
}
```

> æˆ‘ç†è§£æ˜¯ï¼Œç±»ä¼¼Promiseä¸€æ ·ï¼ŒæˆåŠŸé€šè¿‡thençš„å›è°ƒåšä¸€äº›æ“ä½œï¼Œå¤±è´¥é€šè¿‡catchæ¥å¯¹å¼‚å¸¸åšä¸€äº›æ“ä½œï¼Œå½“ç„¶åªæ˜¯è¿™ä¸ªå›è°ƒçš„æ¦‚å¿µï¼Œä¾¿äºç†è§£ï¼Œå…¶å®ä¸¤è€…æ˜¯å®Œå…¨ä¸èƒ½åˆ’ç­‰å·åšå¯¹æ¯”çš„~

### 4.4 å˜é‡ç±»å‹è½¬æ¢

#### 4.4.1 ç±»å‹æ¯”è¾ƒ

ç›®å‰ï¼Œå› ä¸ºæˆ‘ä»¬ä»å‘½ä»¤è¡Œä¸­è·å–çš„guessç±»å‹æ˜¯Stringï¼Œä½†æ˜¯æˆ‘ä»¬å®é™…é€šè¿‡randç”Ÿæˆçš„æ•°å­—æ˜¯Numberç±»å‹ï¼Œè¿™ä¸¤ä¸ªç±»å‹ä¸åŒ¹é…æ˜¯æ— æ³•æ¯”è¾ƒçš„ï¼Œæ‰€ä»¥å¿…é¡»è¿›è¡Œç±»å‹çš„è½¬æ¢ï¼Œ**é™æ€è¯­è¨€å¯¹äºç±»å‹å®šä¹‰çš„ä¸¥è°¨æ€§**



#### 4.4.2 ä»£ç ç¼–å†™

```rust
fn main {
    // çœç•¥
    let guess: u32 = match guess.trim().parse() {
        Ok(num) => num,
        // è¿™ä¸ªcontinueæ˜¯ä¸ºäº†åç»­åšå¾ªç¯çš„æ—¶å€™ï¼Œç›´æ¥è·³è¿‡åç»­æ“ä½œç”¨çš„
        // å…ˆå¿½ç•¥
        Err(_) => continue,
    };
}
```

**FAQ**ï¼š

*Q1*: å¦‚ä½•å®šä¹‰ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Ÿ

*A1*: é€šè¿‡ç±»ä¼¼TSä¸­çš„`:`å‘Šè¯‰rustï¼Œè¿™ä¸ªæ•°å­—å˜é‡çš„ç±»å‹ï¼Œè¿™é‡Œçš„`u32`ä»£è¡¨çš„æ˜¯ä¸€ä¸ª32ä½çš„å˜é‡ï¼Œç±»ä¼¼ä¸€ä¸ªæ•°å­—å˜é‡çš„å£°æ˜ã€‚



*Q2*: ä¸ºä»€ä¹ˆuse rand::Rngä¸å¯¼å…¥çš„æ—¶å€™ï¼Œè¿™ä¸ªgen_rangeå°±æŠ¥é”™ï¼Ÿ

*A2*: å› ä¸º`Rng`è¿™ä¸ª==trait==å®šä¹‰äº†éšæœºæ•°æ–¹æ³•çš„å®ç°ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªåœ°æ–¹ç°æœ‰äº†å®ç°çš„å¼•ç”¨ï¼Œç„¶åè¿™è¾¹è°ƒç”¨gen_rangeæ‰èƒ½è°ƒç”¨

ã€ç†è§£ã€‘[å‚è€ƒæ–‡ç« ](https://zhuanlan.zhihu.com/p/106251259)ï¼ˆ==è¿™ä¸ªåœ°æ–¹å¯¹äºæ¨¡å—åŒ–çš„ç†è§£ä¸ä¸€å®šå¯¹ï¼Œåç»­ä¼šæ”¹==ï¼‰

ç°åœ¨æˆ‘çœ‹docä¸­æœ‰è¿™ä¹ˆå‡ ä¸ªæ¨¡å—çš„æ¦‚å¿µï¼š

modulesï¼šæ¨¡å—ï¼Œè¿™é‡Œå°±æ˜¯æˆ‘ä»¬ç”¨åˆ°çš„åº“çš„æ¦‚å¿µï¼Œæ¯”å¦‚randã€stdç­‰ï¼Œè¿™äº›æœ¬èº«åœ¨å£°æ˜çš„æ—¶å€™æ˜¯é€šè¿‡`mod`æ¥å£°æ˜çš„ï¼Œå¼•å…¥çš„å¦‚æœæ˜¯å­æ¨¡å—ï¼Œä¹Ÿå¯ä»¥é€šè¿‡`use mod::sub_mod`è¿™æ ·çš„æ–¹å¼æ¥å¼•å…¥å­æ¨¡å—

traitsï¼šæ˜¯ä¸€ä¸ª**æ–¹æ³•çš„é›†åˆ**ï¼ˆè¿™ä¸ªæ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼‰ï¼Œå› ä¸ºåœ¨[Rustâ€”â€”ç†è§£trait ï¼ˆä¸€ï¼‰](https://zhuanlan.zhihu.com/p/237560100)è¿™é‡Œç»™å‡ºçš„ä¾‹å­ä¸­ï¼Œå…¶å®æ˜¯åœ¨å®ç°ä¸Šä¼šæ›´åŠ çµæ´»ï¼Œå³å¯ä»¥åœ¨ç‰¹å®šçš„æ¡ä»¶ä¸‹è¡¨ç°å‡ºç‰¹å®šçš„ç‰¹æ€§ï¼Œæ›´åŠ çµæ´»

Functionsï¼šé€šè¿‡`somemod::method`çš„æ–¹æ³•æ¥å¼•ç”¨ï¼Œç›¸åº”æ¨¡å—ä¸‹çš„æ–¹æ³•



*Q3*: trimå’Œparseçš„ç”¨æ³•

*A3*: trimç”¨äºå»é™¤å‰åçš„ç©ºæ ¼å’Œjsä¸­çš„trimç”¨æ³•ä¸€æ ·ï¼Œparseç”¨äºå°†stringè½¬æ¢æˆå¯¹åº”çš„æ•°å­—ç±»å‹ã€‚parseè¿™é‡Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª`Result`ç±»å‹ï¼Œè¿™é‡Œçœ‹ä¸Šå»æ˜¯ä¸æ˜¯ç‰¹åˆ«åƒPromise.thenå’Œcatchå‘¢ã€‚ï¼ˆè¯´çš„å¾ˆå°å£°ï¼Œå¾ˆå¿ƒè™šï¼‰

### 4.5 æ¯”è¾ƒ

#### 4.5.1 matchå…³é”®å­—

å¯¹æ¯”å¤šä¸ªæ•°å€¼ï¼Œç±»ä¼¼switch...caseçš„è¿™ç§è¯­æ³•ï¼Œåœ¨rustä¸­å’Œmatchæœ‰ç‚¹ç±»ä¼¼ï¼Œå…¶ä½œç”¨æ˜¯ï¼Œåœ¨æŸç§åœºæ™¯ä¸‹å¯ä»¥è¿”å›æŸäº›å€¼ã€‚åç»­åº”è¯¥ä¼šè¯¦ç»†çš„ä»‹ç»ï¼ˆè‡³å°‘æ–‡ä¸­æ˜¯è¿™ä¹ˆè¯´çš„ï¼‰

å…¶å…·ä½“è¯­æ³•æ˜¯: 

```rust
// è¿™é‡Œçš„xxxæ˜¯ä¸€ä¸ªæ“ä½œè¿”å›çš„ç»“æœ
match xxxx() {
    A1(a1) => XXX,
    A2(a2) => XXX,
    A3(a3) => XXX,
}
```



#### 4.5.2 ä»£ç ç¼–å†™

```rust
use std::cmp::Ordering;

fn main () {
    // çœç•¥ä¸Šè¿°ä»£ç 
    // è¿™é‡Œçš„&secret_number_1åªæ˜¯ä¸ºäº†å–ä»–çš„å¼•ç”¨å€¼
    match guess.cmp(&secret_number_1) {
        // å¯¹æ¯”ç»“æœæ˜¯lessçš„è¯
        Ordering::Less => println!("Too Small!"),
        // å¯¹æ¯”ç»“æœæ˜¯greaterçš„è¯
        Ordering::Greater => println!("Too Big!"),
        // ç›¸ç­‰æ€ä¹ˆæ“ä½œ
        Ordering::Equal => {
            println!("You win!");
            // è¿™é‡Œæ˜¯åšloopå¾ªç¯çš„æ—¶å€™ï¼ŒçŒœå¯¹äº†ç›´æ¥è·³å‡ºå¾ªç¯ç”¨çš„
            break;
        }
    }
}
```

**FAQ**ï¼š

*Q1*: Orderingæ˜¯å•¥ï¼Ÿ

*A1*:åªæ˜¯ä¸€ä¸ªæšä¸¾å€¼~ä½†æ˜¯ä¹Ÿè¦å¼•å…¥æ‰èƒ½ç”¨



### 4.6 å®Œæ•´ä»£ç 

```rust
// ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“stdä¸­çš„ioæ¨¡å—
// åœ¨jsé‡Œé¢ç›¸å½“äº import { io } from 'std' è¿™ä¸ªç±»æ¯”æ˜¯æˆ‘è‡ªå·±ç†è§£çš„ä¸ä¸€å®šæ­£ç¡®
use rand::Rng;
use std::cmp::Ordering;
use std::io;

fn main() {
    println!("Guess the number!");

    // è¿™é‡Œæœ‰ä¸ªè¯­æ³•æ²¡å¼„æ˜ç™½
    // ä¸ºä»€ä¹ˆuse rand::Rngä¸å¯¼å…¥çš„æ—¶å€™ï¼Œè¿™ä¸ªgen_rangeå°±æŠ¥é”™
    // ä¸çŸ¥é“è¿™ä¸ªåœ°æ–¹çš„å¯¼å…¥å…³ç³»æ˜¯å’‹æ ·
    // åæœŸè¦å†çœ‹çœ‹
    // æ–‡ä¸­å†™çš„æ˜¯å› ä¸ºRngæ˜¯å®šä¹‰äº†éšæœºæ•°æ–¹æ³•çš„å®ç°
    // æ‰€ä»¥åœ¨è¿™ä¸ªåœ°æ–¹ç°æœ‰äº†å®ç°çš„å¼•ç”¨ï¼Œç„¶åè¿™è¾¹è°ƒç”¨gen_rangeæ‰èƒ½è°ƒç”¨

    // è¿™ç§å†™æ³•æŒ‡çš„æ˜¯ç»™ä¸äº†ä¸€ä¸ªrangeï¼Œ[1, 10)
    let secret_number_1 = rand::thread_rng().gen_range(1..10);
    // è¿™ç§å†™æ³•æ˜¯é—­åŒºé—´[1, 10]
    // let secret_number_2 = rand::thread_rng().gen_range(1..=10);

    loop {
        println!("Please input your guess");
        // å˜é‡å®šä¹‰
        // å’Œjsä¸åŒçš„æ˜¯è¿™é‡Œæœ‰mut
        // åœ¨rustä¸­æ‰€æœ‰å˜é‡é»˜è®¤æ˜¯immutableçš„ï¼Œæ‰€ä»¥ä½ åº”è¯¥æ‡‚äº†
        // æœ‰mutå®šä¹‰ï¼šä»£è¡¨å‚æ•°æ˜¯mutableçš„
        // æ— mutå®šä¹‰ï¼šä»£è¡¨å‚æ•°æ˜¯immutableçš„

        // é€šè¿‡ç±»::æ–¹æ³•çš„æ–¹å¼ï¼Œè¡¨ç¤ºè°ƒç”¨äº†ç±»çš„ä¸€ä¸ªæ–¹æ³•
        // è¿™é‡Œè°ƒç”¨çš„æ˜¯ä¸€newçš„ä¸€ä¸ªæ„é€ å‡½æ•°
        // newæˆ‘ç†è§£æ˜¯rustä¸­ä¸€ä¸ªé€šç”¨çš„åç§°ï¼Œç”¨æ¥åˆ›å»ºæŸä¸ªç±»æ–°çš„å€¼
        let mut guess = String::new();

        // è°ƒç”¨ioæ¨¡å—ä¸­çš„stdinæ–¹æ³•
        // è¿™é‡Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨std::io::stdin
        match io::stdin()
            // è°ƒç”¨read_lineæ–¹æ³•
            // &ä»£è¡¨æ˜¯å¼•ç”¨ç±»å‹ï¼Œç»™å¼•ç”¨èµ‹å€¼ï¼Œä»£ç ä¸­çš„å¤šä¸ªéƒ¨åˆ†æ¥å…¥åŒä¸€ä¸ªå¼•ç”¨å°±æ˜¯åŒä¸€ä¸ªå€¼
            // å› ä¸ºä¹‹å‰å®šä¹‰çš„guessæ˜¯mutableçš„æ‰€ä»¥è¿™é‡Œè¦è¡—ä¸Šmutçš„ä¿®é¥°
            // è¿™é‡Œä¸€å®šè¦æ˜¯mutçš„ç±»å‹ï¼Œå› ä¸ºread_lineè¦æ±‚å°±æ˜¯mutableçš„
            .read_line(&mut guess) {
                Ok(n) => {
                    println!("{} bytes read", n);
                    println!("{}", guess);
                }
                Err(error) => println!("error: {}", error),
            };
            // åœ¨expectçš„å®ç°ä¸­ï¼ŒæˆåŠŸæ‰§è¡Œå°±ä¼šè·³è¿‡ï¼Œæ‰§è¡Œå¤±è´¥ä¼šè¿”å›expectä¼ å…¥çš„error message
            // expectç”¨äºåˆ¤æ–­ä¸Šä¸€ä¸ªæ“ä½œæ˜¯å¦æˆåŠŸ
            // è¿™ä¸ªexpectæ˜¯io::Resultå®šä¹‰çš„
            // .expect("Fail to read line");
        
        // è¿™é‡Œçš„parseçš„è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªResult
        // ä¹Ÿæ˜¯å¯ä»¥é€šè¿‡expectæ¥æ€•æ®µæ˜¯å¦æ»¡è¶³äº†è½¬æ¢çš„é¢„æœŸ
        // è½¬æ¢ä¸æˆåŠŸå°±æŠ¥é”™
        // é€šè¿‡ç±»ä¼¼tsçš„ï¼šæ¥å‘Šè¯‰rustï¼Œè¿™ä¸ªå˜é‡æœŸå¾…çš„ç±»å‹
        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        match guess.cmp(&secret_number_1) {
            Ordering::Less => println!("Too Small!"),
            Ordering::Greater => println!("Too Big!"),
            Ordering::Equal => {
                println!("You win!");
                break;
            }
        }
    }
}

```

### 4.7 æ•ˆæœ

![](.\images\guess.gif)



## 5. é€šç”¨çš„ç¼–ç¨‹æ¦‚å¿µ

### 5.1 å˜é‡å’Œå¯å˜æ€§



#### 5.1.1 æ¦‚å¿µ

å˜é‡ï¼ˆvariablesï¼‰:ç”¨æ¥å­˜å‚¨å€¼çš„ä¸€ä¸ªåœ°æ–¹ï¼ˆStoring values with Variablesï¼‰,é»˜è®¤æ˜¯immutable

å¸¸é‡ï¼ˆconstantsï¼‰:ä»…å¯è¢«èµ‹å€¼ä¸€æ¬¡çš„å˜é‡

å¯å˜æ€§ï¼ˆmutabilityï¼‰ï¼šé€šè¿‡mutæ¥å®šä¹‰ï¼Œä»£è¡¨å€¼å¯å˜çš„å˜é‡ï¼ˆç±»ä¼¼letï¼Œå¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼‰

ã€é”™è¯¯å†™æ³•ã€‘

```rust
fn main() {
    // let mut a = 6;
    let a = 5;
    println!("the variable is {}", a);
    // è¿™é‡Œrustä¼šæŠ¥é”™
    a = 6;
    println!("the variable is {}", a);
}
```

ã€æ­£ç¡®å†™æ³•ã€‘å½“ä½¿ç”¨mutçš„æ—¶å€™ï¼Œæˆ‘ä»¬å…è®¸å˜é‡çš„å€¼è¢«æ›´æ”¹

```rust
fn main() {
    // é€šè¿‡mutæ¥åŒºåˆ†ç±»ä¼¼constå’Œletçš„æ¦‚å¿µ
    let mut a = 5;
    println!("the variable is {}", a);
    a = 6;
    println!("the variable is {}", a);
}

```

> Itâ€™s important that we get compile-time errors when we attempt to change a value that we previously designated as immutable because this very situation can lead to bugs. If one part of our code operates on the assumption that a value will never change and another part of our code changes that value, itâ€™s possible that the first part of the code wonâ€™t do what it was designed to do. The cause of this kind of bug can be difficult to track down after the fact, especially when the second piece of code changes the value only *sometimes*
>
> å¤§ä½“çš„æ„æ€å°±æ˜¯ï¼Œä¸ºäº†é¿å…bugå’Œä»£ç ä¸­éé¢„æœŸçš„æˆåˆ†å¦‚æœæˆ‘ä»¬ä¸€ä¸ªå˜é‡å®šä¹‰çš„æ—¶å€™å‡è®¾ä»–æ˜¯ä¸å¯å˜çš„ï¼Œé‚£ä¹ˆå…¶å®å¦‚æœå¯¹å…¶äºŒæ¬¡èµ‹å€¼ï¼Œå…¶å®æ˜¯éç¬¦åˆé¢„æœŸçš„ï¼Œæ‰€ä»¥ç¼–è¯‘é˜¶æ®µä¼šæŠ¥é”™



#### 5.1.2 å˜é‡å’Œå¸¸é‡çš„åŒºåˆ«

**Immutableå˜é‡**å’Œ**å¸¸é‡**ä¹‹é—´çš„åŒºåˆ«ï¼š

+ ã€åŒºåˆ«ã€‘mutå…³é”®è¯ä¸èƒ½ç”¨æ¥ä¿®é¥°constçš„å˜é‡ï¼Œconstä¸€ç›´æ˜¯ä¸å¯å˜çš„

+ ã€åŒºåˆ«ã€‘constå…³é”®å­—å¿…é¡»è¦æ³¨é‡Šç±»å‹ï¼Œå°±æ˜¯éœ€è¦ç»™å‡ºç±»å‹çš„è¯´æ˜

+ ã€åŒºåˆ«ã€‘constå…³é”®è¯å¯ä»¥åœ¨ä»»æ„çš„ä½œç”¨åŸŸè¿›è¡Œå£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸ

+ ã€åŒºåˆ«ã€‘constçš„èµ‹å€¼ï¼Œåªèƒ½æ˜¯ä¸€ä¸ªå¸¸æ•°çš„è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½è¢«è®¡ç®—å‡ºçš„è¿è¡Œåçš„ç»“æœï¼ˆå°±æ˜¯ä¸èƒ½æ˜¯ä¸€ä¸ªæ ¹æ®è¿è¡Œæ—¶ç¯å¢ƒå‚æ•°ä¸ä¸€æ ·ï¼ŒåŠ¨æ€è®¡ç®—å¾—åˆ°çš„åŠ¨æ€çš„ç»“æœï¼‰

+ ã€éåŒºåˆ«ã€‘å»ºè®®å®šä¹‰å¸¸é‡æ—¶ï¼Œé€šè¿‡`å¤§å†™å­—æ¯`å’Œ`_`çš„æ–¹å¼æ¥å®šä¹‰ï¼Œå˜é‡å®šä¹‰æ—¶å»ºè®®ä½¿ç”¨å°å†™ï¼Œå¹¶ä¸”åœ¨å•è¯é—´é€šè¿‡ä¸‹åˆ’çº¿çš„æ–¹å¼è¿›è¡Œéš”ç¦»çš„æ–¹å¼ï¼Œ**è§„èŒƒæœ‰æ•ˆçš„å‘½åæ–¹å¼è®©æˆ‘ä»¬åœ¨å†™ä»£ç æ—¶å¯¹å˜é‡çš„è¯†åˆ«ä¼šæ›´åŠ å‡†ç¡®ï¼Œåˆ©äºä»£ç çš„ç»´æŠ¤**ã€‚

  ```rust
  // å…¨å±€çš„å£°æ˜æ˜¯è¢«å…è®¸çš„
  // åŒºåˆ«äºŒï¼šéœ€è¦é€šè¿‡ `: `æ¥å‘Šè¯‰rustè¿™ä¸ªå¸¸é‡å¯¹åº”çš„ç±»å‹
  // åŒºåˆ«ä¸‰ï¼šå¯ä»¥åœ¨å…¨å±€å®šä¹‰
  const C_C: &str = "_global cc";
  // åŒºåˆ«å››ï¼šåªèƒ½æ˜¯ä¸€ä¸ªå¸¸æ•°è®¡ç®—ç»“æœçš„è¡¨è¾¾å¼
  const THREE_HOURS_IN_SECONDS: u32 = 60 * 60 * 3;
  // åŒºåˆ«ä¸‰ï¼šè¿™ä¸ªé‡Œä½¿ç”¨letä¼šæŠ¥é”™ï¼Œä¸èƒ½å†å…¨å±€å®šä¹‰
  // expected item, found keyword `let`
  let dd = 32;
  
  fn main() {
      const B_BIT: u32 = 3;
      println!("the constant is {}, {}", C_C, B_BIT);
  }
  
  ```



#### 5.1.3 å˜é‡è¦†ç›–ï¼ˆé˜´å½±ï¼‰

> TIPSï¼š è¿™é‡Œæˆ‘å…¶å®æ›´å€¾å‘äºå°†åŸæ–‡ä¸­çš„shadowingç¿»è¯‘æˆå˜é‡çš„è¦†å†™å’Œä½œç”¨åŸŸï¼Œå› ä¸ºçœ‹ä¸Šå»å’Œjsçš„ä½œç”¨åŸŸçœŸçš„å¾ˆåƒï¼Œå½“ç„¶å¯èƒ½ä¼šä¸ç¬¦åˆrustä¸­çš„å«æ³•

**ä½œç”¨åŸŸçš„å®šä¹‰å’Œç‰¹æ€§**ï¼šé€šè¿‡`{}`å›´èµ·æ¥çš„ä»£ç å—æ˜¯å•ç‹¬çš„ä½œç”¨åŸŸï¼Œåœ¨å†…éƒ¨ä½œç”¨åŸŸå®šä¹‰çš„å˜é‡ï¼Œä¼šè¦†ç›–æ‰ä¸Šå±‚ä½œç”¨åŸŸä¸­æœ‰çš„å‚æ•°ï¼Œå’ŒJSè¡¨ç°ç›¸è¿‘

**å˜é‡çš„è¦†å†™**ï¼šé€šè¿‡`let`å®šä¹‰åŒåçš„å˜é‡æ¥è¦†å†™ä¸Šé¢å·²ç»é€šè¿‡`let`å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœæ˜¯å˜é‡çš„è¦†å†™æ˜¯ä¸è¦æ±‚å‰ååŒåå˜é‡ç±»å‹ç›¸åŒçš„ï¼Œä½†æ˜¯`mut`å˜é‡çš„ä¿®æ”¹ï¼Œéœ€è¦å‰åæœ‰ä¸€å®šçš„ç±»å‹

**æ³¨æ„ç‚¹**ï¼š`let`å®šä¹‰çš„å˜é‡é€šè¿‡`let`åœ¨è¦†å†™å’Œæ˜¯ä¸æ˜¯`mut`çš„å˜é‡å…¶å®æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºè¿™é‡Œæ˜¯æ–°åˆ›å»ºä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å¯¹å·²ç»ä¸å¯å˜çš„å˜é‡è¿›è¡Œèµ‹å€¼ï¼ˆç¼–è¯‘æ—¶ä¸ä¼šæŠ¥é”™ï¼‰ï¼Œæ‰€ä»¥æ˜¯ä¸¤ä¸ªç»´åº¦çš„äº‹æƒ…

```rust
fn main() {
    let x = 5;
    let x = x + 1;
    
    // ä¹‹å‰æ˜¯strç±»å‹ï¼Œåé¢çš„numberç±»å‹
    // å¦‚æœæ˜¯å®šä¹‰çš„x_str ä¸ºmut
    // åç»­é€šè¿‡èµ‹å€¼ä¿®æ”¹æ˜¯ä¸è¢«å…è®¸çš„
	let x_str = "   ";
    let x_str = x_str.len();

    {
        let x = x * 2;
        // è¿™é‡Œçš„xæ˜¯12
        println!("The inner x Number is {}", x);
    }

    // è¿™é‡Œçš„xæ˜¯12
    println!("The x Number is {}", x);
}
```



### 5. 2 æ•°æ®ç±»å‹

åœ¨rustä¸­çš„æ•°æ®ç±»å‹ä¸»è¦åŒ…æ‹¬ä¸¤ç§ï¼šæ ‡é‡ï¼ˆscalarï¼‰å’Œç»„åˆç±»å‹ï¼ˆcompoundï¼‰ï¼Œå› ä¸ºrustæœ¬æ¥æ˜¯ä¸€ä¸ª**é™æ€ç±»å‹è¯­è¨€**ï¼Œæ‰€ä»¥éœ€è¦åœ¨ç¼–è¯‘æ—¶å‘Šè¯‰rustæ‰€æœ‰å˜é‡çš„ç±»å‹ï¼Œæ‰€ä»¥åœ¨ç±»å‹è½¬æ¢çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œéœ€è¦è½¬æˆçš„ç±»å‹å£°æ˜ã€‚

#### 5.2.1 æ ‡é‡ç±»å‹

æ ‡é‡ç±»å‹å•è¡¨çš„æ˜¯å•ä¸€çš„å€¼ï¼Œä¸æ˜¯ç»„åˆçš„å€¼ï¼Œå…·ä½“çš„ç±»å‹å¦‚ä¸‹ï¼š

+ æ•´å‹ï¼ˆintegersï¼‰
+ æµ®ç‚¹å‹ï¼ˆfloatï¼‰
+ å¸ƒå°”ç±»å‹
+ å­—ç¬¦ä¸²ç±»å‹

---

##### æ•´å‹ç±»å‹

| é•¿åº¦    | æœ‰ç¬¦å·  | æ— ç¬¦å·  |
| ------- | ------- | ------- |
| 8-bit   | `i8`    | `u8`    |
| 16-bit  | `i16`   | `u16`   |
| 32-bit  | `i32`   | `u32`   |
| 64-bit  | `i64`   | `u64`   |
| 128-bit | `i128`  | `u128`  |
| arch    | `isize` | `usize` |

**æ³¨æ„ç‚¹**

1. æœ‰ç¬¦å·é€šè¿‡`i`å¼€å¤´ï¼Œæ— ç¬¦å·é€šè¿‡`u`å¼€å¤´
2. æ•´å‹çš„åŒºé—´ä¸ºï¼Œæœ‰ç¬¦å·ä¸º -2^n-1^ ~ 2^n-1^ - 1 ï¼Œæ— ç¬¦å·ä¸º0~2^n^ - 1
3. `arch`ä»£è¡¨çš„æ˜¯å½“å‰æ“ä½œç³»ç»Ÿæ¶æ„æœ€å¤§çš„ä½æ•°ï¼Œæ¯”å¦‚x64å°±æ˜¯`u64`, `i64`
4. è¡¨ç¤ºä¸åŒè¿›åˆ¶çš„æ–¹æ³•
   1. åè¿›åˆ¶ï¼š1_000,1000éƒ½æ˜¯åè¿›åˆ¶
   2. åå…­è¿›åˆ¶ï¼š0xff
   3. å…«è¿›åˆ¶ï¼š0o77
   4. äºŒè¿›åˆ¶ï¼š0b1111_0000
   5. å­—èŠ‚ï¼šb'A'
5. å¯¹äºæº¢å‡ºçš„å¤„ç†ï¼Œåœ¨ç¼–è¯‘æ—¶ï¼ˆdebugæ¨¡å¼ï¼‰ä¼šæŠ¥é”™ï¼Œå¼•èµ·ä½ çš„æ³¨æ„ï¼Œä½†æ˜¯å¦‚æœæ˜¯`--release`æ¨¡å¼ä¸‹å¹¶ä¸ä¼šæŠ¥é”™ï¼Œä»–ä¼šæŠŠè¿™ä¸ªå€¼ç½®ä¸ºä½ è¶…è¿‡éƒ¨åˆ†çš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºä»–ä¼šè‡ªåŠ¨åœ¨å¤–éƒ¨å¡«å……ä¸¤ä½ï¼Œæ¥æ¥æ”¶å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥è™½ç„¶ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦æˆ‘ä»¬å¯¹åŠ å‡å’Œæœ€å¤§æœ€å°å€¼æ¥åšä¸€ä¸‹æ ¡éªŒï¼Œä¸»æµçš„åº“ä¸­éƒ½ä¼šæœ‰ç›¸åº”çš„æ–¹æ³•ï¼š
   1. `wrapping_*`æ¥åšæ•°çš„è¿ç®—
   2. `checked_*`æ¥åˆ¤æ–­æ˜¯å¦æœ‰æº¢å‡ºï¼Œ`None`è¿”å›å€¼ä»£è¡¨æº¢å‡ºäº†
   3. `overflowing_*`è¿”å›å€¼å’Œä¸€ä¸ªå¸ƒå°”å€¼æ¥åˆ¤æ–­æ˜¯å¦æº¢å‡ºäº†
   4. `saturating_*`æ–¹æ³•æ¥ä»£è¡¨æ”¹å€¼åœ¨å®šä¹‰çš„åŒºé—´å†…

---

##### æµ®ç‚¹ç±»å‹

æµ®ç‚¹ç±»å‹çš„å®šä¹‰åªæœ‰ä¸¤ä¸ªæ–¹æ³•`f32`å’Œ`f64`

```rust
fn main () {
    // æ•°å€¼ç±»å‹
    // æµ®ç‚¹é™¤æ³•
    // å¦‚æœä¸æ˜¯2.0 / 3.0è¿”å›çš„æ˜¯0ï¼Œé»˜è®¤ä¸ºæ•´å‹
    // let float_num = 2 / 3;  
    
    let floorded:f64 = 2.0 / 3.0;
    // è¿™æ ·æ˜¯0.66666
    println!("the float is {}", floorded)
}
```

**æ³¨æ„ç‚¹**

1. é»˜è®¤æ˜¯`f64`ä¸ºäº†ä¿è¯æµ®ç‚¹æ›´é«˜çš„ç²¾åº¦
2. å¦‚æœæ˜¯`2 / 3`çš„å½¢å¼è¿”å›çš„æ˜¯æ•´å‹ï¼Œä¹Ÿå°±æ˜¯0ï¼Œå¦‚æœéœ€è¦å¾—åˆ°å°æ•°ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯`2.0 / 3.0`ä¿è¯å³è¾¹éƒ½æ˜¯æµ®ç‚¹æ•°ï¼Œæœ€åè®¡ç®—ç»“æœæ‰ä¼šæ˜¯æµ®ç‚¹æ•°

---

##### å¸ƒå°”ç±»å‹

ç±»å‹é€šè¿‡`bool`æ¥è¿›è¡Œå®šä¹‰å³å¯ï¼Œç”¨äºæ¡ä»¶æ§åˆ¶ï¼Œè¿™ä¸ªåœ¨`if`çš„æ§åˆ¶æµä¸­ä¼šç”¨åˆ°ï¼Œå’Œæ‰€æœ‰è¯­è¨€çš„éƒ½ç±»ä¼¼

```rust
fn main () {
    let f: bool = false;
}
```

---

##### å­—ç¬¦ä¸²ç±»å‹

rustä¸­çš„å­—ç¬¦ä¸²ç±»å‹æ˜¯æœ€åŸå§‹çš„å­—æ¯ç±»å‹,åŒ…å«ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡è¡¨æƒ…ç­‰å­—ç¬¦ï¼ˆUnicode Scalaræ¯”ASCIIç æ›´ä¸°å¯Œï¼‰

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```



#### 5.2.2 ç»„åˆç±»å‹

##### å…ƒç»„ç±»å‹

å…ƒç»„ç±»å‹æ˜¯å°†å¤šä¸ªå…¶ä»–ç±»å‹æ”¾åˆ°ä¸€ä¸ªç»„åˆç±»å‹ä¸­ï¼Œå…ƒç»„çš„ç‰¹ç‚¹ï¼š

+ å›ºå®šçš„é•¿åº¦
+ ä¸€æ¬¡æ€§çš„å®šä¹‰
+ é•¿åº¦ä¸å¯æ”¶ç¼©
+ é€—å·åˆ†éš”çš„åˆ—è¡¨
+ é€šè¿‡`()`æ¥å®šä¹‰

```rust
fn main () {
    // ç»„åˆç±»å‹
    // å…ƒç»„
    let tup: (i32, i8, f64) = (500, 22, 3.14);
    let (t1, t2, t3) = tup;
    
    println!("tup -> {}, {}, {}", tup.0, tup.1, tup.2);
    println!("tup -> {}, {}, {}", t1, t2, t3);
}
```

**æ³¨æ„ç‚¹**ï¼š

1. å¯ä»¥é€šè¿‡`.`è¯­æ³•æ¥è¿›è¡Œå¯¹åº”ä½ç½®å…ƒç»„æ•°æ®çš„è·å–
2. å¯ä»¥é€šè¿‡è§£æ„çš„æ–¹å¼æ¥å›å»å¯¹åº”ä½ç½®ä¸Šçš„å€¼



---

##### æ•°ç»„ç±»å‹

æ•°ç»„æ˜¯åŒä¸€ç§ç±»å‹çš„å…ƒç´ çš„é›†åˆï¼Œå’Œå…ƒç´ çš„ä¸åŒæ˜¯**å¿…é¡»æ‰€æœ‰å…ƒç´ å…·æœ‰ç›¸åŒçš„ç±»å‹**ï¼Œå…¶ç‰¹ç‚¹ï¼š

+ å…ƒç´ ç±»å‹ç›¸åŒ
+ é€šè¿‡`[]`æ¥å®šä¹‰

```rust
fn main () {
    // æ•°ç»„
    let array1 = [1, 2, 3, 4, 5];
    let array2: [i32;5] = [1, 2, 3, 4, 5]; 
    // å‰ä¸¤ç§æ¯”è¾ƒå¥½ç†è§£ï¼Œè¿™ç§çš„æ„æ€æ˜¯ç”Ÿæˆä¸€ä¸ªæ•´å‹çš„æ•°ç»„ï¼Œé•¿åº¦ä¸º5ï¼Œé»˜è®¤å€¼ä¸º3
    let array3 = [3;5];
    
    println!("str -> {}", array2[1]);
}
```

**æ³¨æ„ç‚¹**

1. æ¥å…¥æ•°ç»„çš„æ–¹å¼é€šè¿‡ç´¢å¼•æ¥æ¥å…¥ï¼Œä¾‹å¦‚`array2[1]`
2. å¦‚æœè¿™ä¸ªindexæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€å®šè¦åˆ¤æ–­indexæ˜¯å¦å°äºæ•°ç»„çš„é•¿åº¦ï¼Œä¸ç„¶çš„è¯ç¼–è¯‘çš„æ—¶å€™ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºä½ çš„indexæ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œä½†æ˜¯åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å¾ˆæœ‰å¯èƒ½indexè¶…è¿‡äº†æœ€é•¿çš„æ•°ç»„é•¿åº¦æŠ¥é”™ï¼ˆ**è¶Šç•ŒæŠ¥é”™**ï¼‰

### 5.3 å‡½æ•°

#### 5.3.1 å‡½æ•°å®šä¹‰æ–¹å¼

å‡½æ•°çš„å®šä¹‰æ–¹å¼ï¼š

1. é€šè¿‡`fn`å…³é”®å­—è¿›è¡Œå®šä¹‰
2. åœ¨`fn`åè·Ÿä¸Šç›¸åº”çš„å‡½æ•°å
3. é€šè¿‡`{}`æ¥ å®šä¹‰å‡½æ•°ä½“

```rust
fn main () {
    println!("this is main function");
    another_function();
}

fn another_function() {
    println!("this is another function, {}", get_params(3, 4))
}

fn get_params  (a: i32, b: i32) -> i32 {
    return a + b;
}
```

**æ³¨æ„ç‚¹**ï¼š

1. å‡½æ•°çš„è¾“å…¥å¯å®šä¹‰ç±»å‹ï¼Œè¾“å…¥é€šè¿‡`:`æ¥å®šä¹‰ç±»å‹
2. é»˜è®¤çš„å‡½æ•°æ˜¯ä¸å¸¦è¿”å›å€¼çš„ï¼Œå¦‚æœå¸¦ä¸Šè¿”å›å€¼éœ€è¦é€šè¿‡`->`æŒ‡å®šç±»å‹ï¼Œä¸ç„¶ä¼šæŠ¥é”™



#### 5.3.2 å‡½æ•°ä½“åŒ…æ‹¬å£°æ˜å’Œè¡¨è¾¾å¼

Rustæ˜¯ä¸€ä¸ªåŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œè¡¨è¾¾å¼å’Œå£°æ˜çš„å®šä¹‰åœ¨è¿™é‡Œå°±ä¸å™è¿°äº†ï¼Œç™¾åº¦è‚¯å®šæ¯”æˆ‘ä¸“ä¸šã€‚

**æ³¨æ„ç‚¹**

1. å£°æ˜å¹¶ä¸ä¼šè¿”å›å€¼ï¼Œæ‰€ä»¥ä¸æ”¯æŒJSä¸­çš„é‚£ç§è¿ç­‰å¼èµ‹å€¼ï¼Œç›®å‰æ˜¯ä¸è¢«å…è®¸çš„~

```rust
fn main() {
    // è¿™é‡Œä¼šæŠ¥é”™`let` expressions in this position are experimental
    let x = (let y = 6);
}
```

2. åœ¨rustä¸­è¡¨è¾¾å¼æ˜¯ä¸éœ€è¦åŒ…å«å°¾åˆ†å·çš„ï¼Œä¸€æ—¦ä½ ä½¿ç”¨äº†å°¾åˆ†å·å°±æŠŠè¡¨è¾¾å¼å˜æˆäº†å£°æ˜

```rust
fn main () {
    println!("this is main function");
    another_function();
    let y = {
        let x = 3;
        // è¿™é‡Œæ²¡æœ‰å°¾åˆ†å·
        // æ‰€ä»¥æ˜¯ä¸ªè¡¨è¾¾å¼ï¼ŒY -> 4
        // å¦‚æœåŠ ä¸Šå°¾åˆ†å·ï¼Œå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºä»–å…¶å®è¿˜æ˜¯æ²¡æœ‰è¿”å›å€¼
        x+1
    };

    println!("y => {}", y)
}
```

3. å¯ä»¥å°†å‡½æ•°çš„è¿”å›å€¼å’Œè¡¨è¾¾å¼ç»“åˆï¼Œè¿™æ ·å‡½æ•°ä¼šå˜å¾—æ›´åŠ ç®€æ´

   ```rust
   fn main () {
       println!("this is main function");
       another_function();
       let y = {
           let x = 3;
           addOne(x)
       };
   
       // y => 4
       println!("y => {}", y)
   }
   
   fn addOne(num: u32) -> u32 {
       num + 1
   }
   ```



### 5.4 æ³¨é‡Š

æ³¨é‡Šä¸»è¦é€šè¿‡`//`æ¥è¿›è¡Œæ³¨é‡Šï¼Œå¦‚æœæ˜¯å¤šè¡Œçš„è¯ï¼Œå°±æ˜¯æ¯ä¸€è¡Œä¹‹æ°”éƒ½éœ€è¦é€šè¿‡`//`æ¥è¿›è¡Œæ³¨é‡Š

### 5.5 æ§åˆ¶æµ

åŸºæœ¬ä¸Šæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½é€ƒä¸å¼€ç›¸å…³çš„æ§åˆ¶æµçš„è¯­æ³•ï¼Œä¾‹å¦‚`if`,å¾ªç¯`loop`ç­‰ï¼Œè¿™ä¸€å°èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹rustä¸­çš„å¾ªç¯å’Œåˆ¤æ–­è¯­æ³•

####  5.5.1 ifè¡¨è¾¾å¼

å’Œå…¶ä»–è¯­è¨€ä¸­çš„ifè¡¨è¾¾å¼ä¸€æ ·ï¼Œé€šè¿‡`if`å…³é”®å­—åé¢çš„å£°æ˜ï¼ŒæŒ‡å®šæ¡ä»¶åŒ¹é…åçš„æ“ä½œï¼ŒåŒæ ·ä¹Ÿæ”¯æŒ`else`å’Œ`else if`

```rust
fn main() {
    let number = 5;
    if number < 5 {
        println!("number is less than 5")
    } else if number == 5 {
        println!("number is equal to 5")
    } else {
        println!("number is greater than 5")
    }
}
```

**æ³¨æ„ç‚¹**

1. `if`ä½œä¸ºè¡¨è¾¾å¼ï¼Œå¯ä»¥åœ¨letä¸­ä½¿ç”¨è¾¾åˆ°ä¸‰å…ƒè¡¨è¾¾å¼çš„æ•ˆæœ

   ```rust
   fn main() {
       let number = 5;
       let a = if number < 3 {10} else {20};
   
       println!("a -> {}", a)
   }
   ```

2. `1`ä¸­è¿™ç§è¡¨è¾¾å¼è¦å¯ä»¥ä½¿ç”¨ï¼Œæœ‰ä¸ªå‰æå°±æ˜¯æ¯ä¸ªè¡¨è¾¾å¼è¿”å›å€¼çš„ç±»å‹ï¼Œéœ€è¦ç›¸åŒï¼Œä¸ç„¶åœ¨ç¼–è¯‘æ—¶ï¼Œrustç¼–è¯‘å™¨ä¼šæŠ¥é”™



#### 5.5.2 ä½¿ç”¨Loopæ¥å®ç°é‡å¤

rustä¸­æä¾›äº†ä¸‰ç§å¾ªç¯çš„æ–¹å¼ï¼ŒåŒ…æ‹¬`loop`, `while`å’Œ`for`ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹æ¯ä¸€ç§çš„ç”¨æ³•å’Œå†™æ³•



##### loopå¾ªç¯

loopå¾ªç¯çš„ç‰¹ç‚¹æ˜¯ï¼Œä¸ä¼šä¸»åŠ¨ç»“æŸå¾ªç¯ï¼Œç›´åˆ°ä½¿ç”¨äººæ‰‹åŠ¨åœæ­¢ï¼ˆè°ƒç”¨`break`æŒ‡ä»¤ï¼‰æˆ–è€…ç›´æ¥è¿è¡Œ`ctrl + C`æ‰ä¼šåœæ­¢è¯¥å¾ªç¯ï¼Œå…·ä½“ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š

```rust
fn main() {
    let mut b = 1;
    loop {
        println!("b =>{}", b);
        b += 1;

        if b > 5 {
            break;
        }
    }
}
```

**æ³¨æ„ç‚¹**ï¼š

1. å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œrustä¸­æä¾›äº†`break`å’Œ`continue`å…³é”®å­—ï¼Œç”¨æ¥åœæ­¢å¾ªç¯å’Œè·³è¿‡åç»­ä»£ç è¿™ä¸¤ä¸ªæ“ä½œ

2. å¦‚æœéœ€è¦é€€å‡ºæŒ‡å®šçš„å¾ªç¯ï¼Œå¯ä»¥å°†loopçš„çš„è¿”å›å€¼æ‹¿åˆ°ï¼Œå¹¶é€šè¿‡breakæ¥ä¸­ä¸­æ–­

   ```rust
   fn loopExit() {
       let mut  count = 0;
       'loop_rlt: loop {
           println!("count -> {}", count);
           let mut inner_count = 10;
           
           loop {
               println!("inner count ->{}", inner_count);
   
               if inner_count == 8 {
                   break;
               }
   
               if inner_count == 9 && count == 2 {
                   break 'loop_rlt;
               }
               
               inner_count -= 1;
           }
   
           count +=1;
       }
   }
   // è¿è¡Œç»“æœ
   // count -> 0
   // inner count ->10
   // inner count ->9
   // inner count ->8
   // count -> 1
   // inner count ->10
   // inner count ->9
   // inner count ->8
   // count -> 2
   // inner count ->10
   // inner count ->9
   ```

3. loopè¿”å›çš„å€¼éœ€è¦é€šè¿‡`'` åŠ ä¸Šå˜é‡ååŠ ä¸Š`:`æ¥æ ‡æ³¨è¿™æ˜¯ä¸€ä¸ªå¾ªç¯æ ‡è®°ï¼Œè¿™æ˜¯ä¸€ä¸ªè§„èŒƒï¼Œä¾‹å¦‚ä¸Šè¿°çš„`'loop_rlt`ï¼Œè¿™æ ·é€šè¿‡`continue`å’Œ`break`æ¥é€€å‡ºå’Œç»§ç»­å¾ªç¯

4. é€šè¿‡`let`å’Œ`break`å¯ä»¥è·å–breakæœ€åæˆ‘ä»¬æƒ³è¦è¾“å‡ºçš„å‡½æ•°å€¼

   ```rust
   fn loop_return_value(num: u32) -> u32 {
       let mut count = 1;
   
       let loop_value = loop {
           count+=1;
           
           if count == num {
               break count * 2;
           }
       };
   
       return loop_value
   }
   
   fn main () {
       let rlt: u32 = loop_return_value(30);
       // rlt -> 60
       println!("rlt -> {}", rlt);
   }
   ```

##### whileå¾ªç¯

`while`å¾ªç¯å’Œ`loop`ä¸­ï¼Œä¸€æ ·å¯ä»¥é€šè¿‡`break`æ¥è¿›è¡Œä¸­æ–­ï¼Œå…¶å†™æ³•ä¹Ÿå’Œæˆ‘ä»¬ç†Ÿæ‚‰çš„å…¶ä»–è¯­è¨€ä¸­çš„`while`ç›¸ä¼¼

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{}!", number);

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

**æ³¨æ„ç‚¹**ï¼š

1. å¦‚æœæ˜¯ä½¿ç”¨`while`å¾ªç¯éå†æ•°ç»„ç­‰æœ‰ç•Œçš„ç»“æ„ï¼Œå¯èƒ½éœ€è¦å¯¹åŠ¨æ€ç”Ÿæˆçš„indexåšå‡ºåˆ¤æ–­

##### forå¾ªç¯

**for...inå¾ªç¯**

é€šè¿‡whileå¾ªç¯æ¥ä¾¿åˆ©æ•°ç»„å¯èƒ½ä¼šäº§ç”Ÿè¶Šç•Œçš„é—®é¢˜ï¼Œä¸ºäº†é¿å…è¶Šç•Œå¯ä»¥é€šè¿‡`for...in`**çš„æ–¹å¼æ¥è¿›è¡Œ**éå†ï¼Œä¾¿ä¸ä¼šæœ‰è¶Šç•Œçš„é—®é¢˜ï¼Œå› ä¸ºåœ¨whileä¸­æˆ‘ä»¬æ§åˆ¶indexæ˜¯åŠ¨æ€çš„ä¸ç¨³å®šã€‚

```rust
fn for_loop () {
    let a = [1, 2, 3, 4, 5, 6];

    for elem in a {
        println!("loop for -> {}", elem);
    }
}
```

**åˆ©ç”¨Rangeå’Œfor..inçš„ç»„åˆæ¥è¿›è¡Œå¾ªç¯**

é€šè¿‡`for...in`é™¤äº†å®ç°å¯¹é›†åˆç±»å‹çš„æ•°æ®ç»“æ„è¿›è¡Œéå†ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°å¯¹whileé‚£æ ·çš„å¤šæ¬¡å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`range`åŠ `for...in`å¾ªç¯çš„æ–¹å¼

```rust
fn for_loop () {
    for elem in (1..100) {
        println!("item -> {}", elem)
    }
    // item -> 1
    // item -> 2
    // ...
    /// item -> 99
}
```

> ä¸Šè¿°æ–¹å¼å› ä¸ºæ˜¯1..100æ‰€ä»¥åŒºé—´æ˜¯[1, 100)ï¼Œå¦‚æœæƒ³è¦åŒé—­çš„åŒºé—´ï¼Œå†™æ³•åº”è¯¥æ˜¯(1..=100)



#### 5.5.3 ç»ƒä¹ é¢˜

**Fibonacci**

```rust
fn fibonacci(number: u32) -> u32 {
    if number == 1 {
        return 1;
    } else if number == 2 {
        return 1;
    } else {
        return fibonacci(number - 2) + fibonacci(number - 1)
    }
}
```



